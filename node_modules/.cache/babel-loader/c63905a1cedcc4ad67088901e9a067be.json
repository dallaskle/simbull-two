{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Dallas\\\\Desktop\\\\simbull-two\\\\src\\\\components\\\\Functionality\\\\CreateBid.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './functions.css';\nimport { Link } from 'react-router-dom';\nimport { db } from '../../services/firebase';\nimport firebase from 'firebase';\nimport moment from 'moment';\n\nconst CreateBid = props => {\n  _s();\n\n  //props\n  const team = props.team;\n  const user = props.user;\n  const closeBid = props.closeBid; //states\n\n  const [calc, setCalc] = useState('');\n  const [showShare, setShowShare] = useState(true);\n  const [showPrice, setShowPrice] = useState(false);\n  const [bidPrice, setBidPrice] = useState();\n  const [bidShares, setBidShares] = useState();\n  const [maxBuy, setMaxBuy] = useState(7);\n  let today = moment().format('YYYYMMDD'); //Functionality\n  //calc add digit\n\n  const addDigit = x => {\n    console.log(calc);\n\n    if (x === '.' && calc.substring(calc.length - 1, calc.length) === '.') {\n      return null;\n    } else {\n      if (showShare) {\n        let hold = calc;\n        let thisNum = hold.concat(x);\n        console.log(thisNum);\n        setBidShares(parseFloat(thisNum));\n        setCalc(thisNum);\n      } else if (showPrice) {\n        let hold = calc;\n        let thisNum = hold.concat(x);\n        console.log(thisNum);\n        setBidPrice(parseFloat(thisNum));\n        setCalc(thisNum);\n      }\n    }\n  };\n\n  const deleteDigit = () => {\n    if (showShare) {\n      const editedText = calc.slice(0, -1);\n      setBidShares(parseFloat(editedText));\n      setCalc(editedText);\n    } else if (showPrice) {\n      const editedText = calc.slice(0, -1);\n      setBidPrice(parseFloat(editedText));\n      setCalc(editedText);\n    }\n  };\n\n  function createBid() {\n    let numShares = 0;\n    let totalPrice = 0;\n    db.collection('Asks').where('team', '==', team.team).get().then(snapshot => {\n      snapshot.forEach(doc => {\n        const data = doc.data();\n\n        if (data.askOwner != user.email) {\n          if (bidPrice >= data.askPrice) {\n            numShares++;\n\n            if (numShares <= bidShares) {\n              totalPrice = totalPrice + data.askPrice;\n            }\n          }\n        }\n      });\n\n      if (numShares >= bidShares && totalPrice <= (bidShares * bidPrice).toFixed(2)) {\n        if (bidShares <= maxBuy) {\n          let stillCreate = window.confirm(`There are enough open offers to sell to fill your order! You can buy the available shares for $${(totalPrice / bidShares).toFixed(2)} per share. Would you still like to create the offer to buy?`);\n\n          if (stillCreate) {\n            if (user.cash > bidPrice * bidShares + 1) {\n              var batch = db.batch();\n\n              for (let i = 0; i < bidShares; i++) {\n                let thisRef = db.collection('Bids').doc(`${team.team}-${user.email}-$${parseFloat(bidPrice)}-${i}`);\n                batch.set(thisRef, {\n                  bidOwner: user.email,\n                  bidPrice: parseFloat(bidPrice),\n                  bidTeam: team.team,\n                  bidNum: i,\n                  subscription: user.subscription,\n                  time: firebase.firestore.Timestamp.now(),\n                  date: today\n                });\n              }\n\n              let newBidsAvailable = parseFloat(team.bidsAvailable) + parseFloat(bidShares);\n              let newTotalBidPrice = team.totalBidPrice + bidShares * bidPrice;\n              let newHighestBidPrice = bidPrice > team.highestBidPrice ? bidPrice : team.highestBidPrice;\n              let teamRef = db.collection('Teams').doc(team.team);\n              batch.update(teamRef, {\n                bidsAvailable: parseFloat(newBidsAvailable),\n                totalBidPrice: parseFloat(newTotalBidPrice),\n                highestBidPrice: parseFloat(newHighestBidPrice)\n              });\n              batch.commit().then(() => {\n                alert(`You created an offer to buy ${bidShares} shares for a price of $${bidPrice} per share, for a total of $${bidPrice * bidShares}.`);\n                window.location.href = \"http://simbull.app\";\n              }).catch(error => console.log(error));\n            } else {\n              alert(`You don't have enough cash to cover the offer to buy`);\n            }\n          }\n        } else {\n          alert(`Sorry we can't create that bid for you because it put you over the maximum amount of shares for a single team. You can only create a bid for ${maxBuy} shares.`);\n        }\n      } else {\n        if (user.cash > bidPrice * bidShares) {\n          if (bidShares <= maxBuy) {\n            if (window.confirm(`Do you want to create an offer to buy ${bidShares} shares for a price of $${bidPrice} per share, for a total of $${bidPrice * bidShares}?`)) {\n              var batch = db.batch();\n\n              for (let i = 0; i < bidShares; i++) {\n                let thisRef = db.collection('Bids').doc(`${team.team}-${user.email}-$${parseFloat(bidPrice)}-${i}`);\n                batch.set(thisRef, {\n                  bidOwner: user.email,\n                  bidPrice: parseFloat(bidPrice),\n                  bidTeam: team.team,\n                  bidNum: i,\n                  subscription: user.subscription,\n                  time: firebase.firestore.Timestamp.now(),\n                  date: today\n                });\n              }\n\n              let newBidsAvailable = parseFloat(team.bidsAvailable) + parseFloat(bidShares);\n              let newTotalBidPrice = team.totalBidPrice + bidShares * bidPrice;\n              let newHighestBidPrice = bidPrice > team.highestBidPrice ? bidPrice : team.highestBidPrice;\n              let teamRef = db.collection('Teams').doc(team.team);\n              batch.update(teamRef, {\n                bidsAvailable: parseFloat(newBidsAvailable),\n                totalBidPrice: parseFloat(newTotalBidPrice),\n                highestBidPrice: parseFloat(newHighestBidPrice)\n              });\n              batch.commit().then(() => {\n                alert(`You created an offer to buy ${bidShares} shares for a price of $${bidPrice} per share, for a total of $${bidPrice * bidShares}.`);\n                window.location.href = \"http://simbull.app\";\n              }).catch(error => console.log(error));\n            }\n          } else {\n            alert(`Sorry we can't create that bid for you because it put you over the maximum amount of shares for a single team. You can only create a bid for ${maxBuy} shares.`);\n          }\n        } else {\n          alert('You dont have enough cash to cover the offer to buy');\n        }\n      }\n    }).catch(error => console.log(error));\n  }\n\n  const checkShareAmt = () => {\n    if (user.shares) {\n      let count = 0;\n      user.shares.map(s => {\n        let share = s.substring(0, s.length - 4);\n\n        if (share == team.team) {\n          count++;\n        }\n      });\n      let buyAmt = 7 - count;\n      setMaxBuy(buyAmt);\n    }\n  };\n\n  useEffect(() => {\n    checkShareAmt();\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"TradePopup\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SellShare\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        onClick: closeBid,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-times-circle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ss-title\",\n        children: \"Offer to Buy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ss-team\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"ss-img\",\n          src: `nba_jersey/${team.team}.png`,\n          alt: \"team\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 42\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tc-name-sim\",\n          children: \"sim\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 116\n        }, this), team.team]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-bidask\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-bid\",\n          children: [\"Bid\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-bid-p green\",\n            children: team.highestBidPrice.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-price\",\n          children: [\"$\", team.lastSoldPrice.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-ask gray\",\n          children: [\"Ask\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-ask-p red\",\n            children: team.lowestAskPrice.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ss-cash\",\n        children: [\"Cash Available: $\", user.cash && user.cash.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), showShare && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ss-shareAmt\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ss-share-label\",\n          children: \"Shares:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 60\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ss-shareAmt-underline\",\n          children: calc ? calc : '0'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 108\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 31\n      }, this), showPrice && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ss-shareAmt\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          onClick: () => {\n            setShowPrice(false);\n            setShowShare(true);\n            setCalc('');\n            setBidPrice();\n            setBidShares();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-undo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 162\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 60\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ss-share-label\",\n          children: \"Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 199\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ss-shareAmt-underline\",\n          children: calc ? calc : '0.00'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 246\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ss-btn-div\",\n        children: [showShare && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ss-submit\",\n            onClick: () => {\n              setShowPrice(true);\n              setShowShare(false);\n              setCalc('');\n            },\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 147\n          }, this)]\n        }, void 0, true), showPrice && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ss-submit\",\n            onClick: createBid,\n            children: \"Create Offer to Buy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 115\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"1\");\n          },\n          children: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"2\");\n          },\n          children: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"3\");\n          },\n          children: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"4\");\n          },\n          children: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"5\");\n          },\n          children: \"5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"6\");\n          },\n          children: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"7\");\n          },\n          children: \"7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"8\");\n          },\n          children: \"8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"9\");\n          },\n          children: \"9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this), showPrice && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\".\");\n          },\n          children: \".\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn\",\n          onClick: () => {\n            addDigit(\"0\");\n          },\n          children: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ss-btn-2\",\n          onClick: () => {\n            deleteDigit();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-arrow-left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 80\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CreateBid, \"A7ypAyf2+9pRJpa11NBd/NZmN7I=\");\n\n_c = CreateBid;\nexport default CreateBid;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateBid\");","map":{"version":3,"sources":["C:/Users/Dallas/Desktop/simbull-two/src/components/Functionality/CreateBid.js"],"names":["React","useState","useEffect","Link","db","firebase","moment","CreateBid","props","team","user","closeBid","calc","setCalc","showShare","setShowShare","showPrice","setShowPrice","bidPrice","setBidPrice","bidShares","setBidShares","maxBuy","setMaxBuy","today","format","addDigit","x","console","log","substring","length","hold","thisNum","concat","parseFloat","deleteDigit","editedText","slice","createBid","numShares","totalPrice","collection","where","get","then","snapshot","forEach","doc","data","askOwner","email","askPrice","toFixed","stillCreate","window","confirm","cash","batch","i","thisRef","set","bidOwner","bidTeam","bidNum","subscription","time","firestore","Timestamp","now","date","newBidsAvailable","bidsAvailable","newTotalBidPrice","totalBidPrice","newHighestBidPrice","highestBidPrice","teamRef","update","commit","alert","location","href","catch","error","checkShareAmt","shares","count","map","s","share","buyAmt","lastSoldPrice","lowestAskPrice"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './functions.css'\r\nimport {Link} from 'react-router-dom'\r\nimport {db} from '../../services/firebase'\r\nimport firebase from 'firebase'\r\nimport moment from 'moment'\r\n\r\n\r\nconst CreateBid = (props) => {\r\n    //props\r\n    const team = props.team\r\n    const user = props.user\r\n    const closeBid = props.closeBid\r\n\r\n    //states\r\n    const [calc, setCalc] = useState('')\r\n    const [showShare, setShowShare] = useState(true)\r\n    const [showPrice, setShowPrice] = useState(false)\r\n    const [bidPrice, setBidPrice] = useState()\r\n    const [bidShares, setBidShares] = useState()\r\n    const [maxBuy, setMaxBuy] = useState(7)\r\n\r\n    let today = moment().format('YYYYMMDD')\r\n\r\n    //Functionality\r\n    //calc add digit\r\n    const addDigit = (x) => {\r\n        console.log(calc)\r\n        if(x === '.' && calc.substring(calc.length - 1, calc.length) === '.'){\r\n            return null\r\n        }else{\r\n            if(showShare){\r\n                let hold = calc\r\n                let thisNum = hold.concat(x)\r\n                console.log(thisNum)\r\n                setBidShares(parseFloat(thisNum))\r\n                setCalc(thisNum)\r\n            }else if(showPrice){\r\n                let hold = calc\r\n                let thisNum = hold.concat(x)\r\n                console.log(thisNum)\r\n                setBidPrice(parseFloat(thisNum))\r\n                setCalc(thisNum)\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    const deleteDigit = () => {\r\n        if(showShare){\r\n            const editedText = calc.slice(0, -1)\r\n            setBidShares(parseFloat(editedText))\r\n            setCalc(editedText)\r\n        }else if(showPrice){\r\n            const editedText = calc.slice(0, -1)\r\n            setBidPrice(parseFloat(editedText))\r\n            setCalc(editedText)\r\n        }\r\n        \r\n    }\r\n\r\n    function createBid() {\r\n        let numShares = 0\r\n        let totalPrice = 0\r\n        db.collection('Asks').where('team', '==', team.team).get().then((snapshot) => {\r\n            snapshot.forEach((doc) => {\r\n              const data = doc.data();\r\n              if(data.askOwner != user.email){\r\n                if(bidPrice >= data.askPrice){\r\n                    numShares++\r\n                    if(numShares <= bidShares){\r\n                      totalPrice = totalPrice + data.askPrice\r\n                  }\r\n                }\r\n              }\r\n            });\r\n            if(numShares >= bidShares && totalPrice <= (bidShares * bidPrice).toFixed(2)){\r\n                if(bidShares<=maxBuy){\r\n                    let stillCreate = window.confirm(`There are enough open offers to sell to fill your order! You can buy the available shares for $${(totalPrice/bidShares).toFixed(2)} per share. Would you still like to create the offer to buy?`)\r\n                    if(stillCreate){\r\n                        if(user.cash > (bidPrice * bidShares) + 1){\r\n                            var batch = db.batch()\r\n                            for(let i = 0; i < bidShares; i++) {\r\n                                let thisRef = db.collection('Bids').doc(`${team.team}-${user.email}-$${parseFloat(bidPrice)}-${i}`)\r\n                                batch.set(thisRef, {\r\n                                    bidOwner: user.email,\r\n                                    bidPrice: parseFloat(bidPrice),\r\n                                    bidTeam: team.team,\r\n                                    bidNum: i,\r\n                                    subscription: user.subscription,\r\n                                    time: firebase.firestore.Timestamp.now(),\r\n                                    date: today\r\n                                })\r\n                            }\r\n                            let newBidsAvailable = parseFloat(team.bidsAvailable) + parseFloat(bidShares)\r\n                            let newTotalBidPrice = team.totalBidPrice + (bidShares * bidPrice)\r\n                            let newHighestBidPrice = bidPrice > team.highestBidPrice ? bidPrice : team.highestBidPrice\r\n                            let teamRef = db.collection('Teams').doc(team.team)\r\n                            batch.update(teamRef, {\r\n                                bidsAvailable: parseFloat(newBidsAvailable),\r\n                                totalBidPrice: parseFloat(newTotalBidPrice),\r\n                                highestBidPrice: parseFloat(newHighestBidPrice)\r\n                            })\r\n                            batch.commit().then(()=> {\r\n                                alert(`You created an offer to buy ${bidShares} shares for a price of $${bidPrice} per share, for a total of $${bidPrice * bidShares}.`)\r\n                                window.location.href = \"http://simbull.app\";\r\n                            }).catch((error) => console.log(error));\r\n                        }else{\r\n                            alert(`You don't have enough cash to cover the offer to buy`)\r\n                        }\r\n                    }\r\n                }\r\n                else{\r\n                    alert(`Sorry we can't create that bid for you because it put you over the maximum amount of shares for a single team. You can only create a bid for ${maxBuy} shares.`)\r\n                }\r\n                   \r\n            }\r\n            else{\r\n                if(user.cash > (bidPrice * bidShares)){\r\n                    if(bidShares<=maxBuy){\r\n                        if(window.confirm(`Do you want to create an offer to buy ${bidShares} shares for a price of $${bidPrice} per share, for a total of $${bidPrice * bidShares}?`)){\r\n                            var batch = db.batch()\r\n                            for(let i = 0; i < bidShares; i++) {\r\n                                let thisRef = db.collection('Bids').doc(`${team.team}-${user.email}-$${parseFloat(bidPrice)}-${i}`)\r\n                                batch.set(thisRef, {\r\n                                    bidOwner: user.email,\r\n                                    bidPrice: parseFloat(bidPrice),\r\n                                    bidTeam: team.team,\r\n                                    bidNum: i,\r\n                                    subscription: user.subscription,\r\n                                    time: firebase.firestore.Timestamp.now(),\r\n                                    date: today\r\n                                })\r\n                            }\r\n                            let newBidsAvailable = parseFloat(team.bidsAvailable) + parseFloat(bidShares)\r\n                            let newTotalBidPrice = team.totalBidPrice + (bidShares * bidPrice)\r\n                            let newHighestBidPrice = bidPrice > team.highestBidPrice ? bidPrice : team.highestBidPrice\r\n                            let teamRef = db.collection('Teams').doc(team.team)\r\n                            batch.update(teamRef, {\r\n                                bidsAvailable: parseFloat(newBidsAvailable),\r\n                                totalBidPrice: parseFloat(newTotalBidPrice),\r\n                                highestBidPrice: parseFloat(newHighestBidPrice)\r\n                            })\r\n                            batch.commit().then(()=> {\r\n                                alert(`You created an offer to buy ${bidShares} shares for a price of $${bidPrice} per share, for a total of $${bidPrice * bidShares}.`)\r\n                                window.location.href = \"http://simbull.app\";\r\n                            }).catch((error) => console.log(error));\r\n                        }\r\n                    }\r\n                    else{\r\n                        alert(`Sorry we can't create that bid for you because it put you over the maximum amount of shares for a single team. You can only create a bid for ${maxBuy} shares.`)\r\n                    }\r\n                }else{\r\n                    alert('You dont have enough cash to cover the offer to buy')\r\n                }\r\n            }\r\n          })\r\n          .catch((error) => console.log(error));\r\n         \r\n    }\r\n\r\n    const checkShareAmt = () => {\r\n        if(user.shares){\r\n            let count = 0\r\n            user.shares.map(s => {\r\n                let share = s.substring(0, s.length - 4)\r\n                if(share == team.team){\r\n                    count++\r\n                }\r\n            })\r\n            let buyAmt = 7 - count\r\n            setMaxBuy(buyAmt)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        checkShareAmt()\r\n    }, [user])\r\n\r\n    return(\r\n        <div className=\"TradePopup\">\r\n            <div className=\"SellShare\">\r\n                <Link onClick={closeBid}><i className=\"fa fa-times-circle\"></i></Link>\r\n                <div className=\"ss-title\">Offer to Buy</div>\r\n                <div className='ss-team'><img className=\"ss-img\"  src={`nba_jersey/${team.team}.png`} alt='team' /><span className=\"tc-name-sim\">sim</span>{team.team}</div>\r\n                <div className=\"h-bidask\">\r\n                    <div className=\"h-bid\">\r\n                        Bid\r\n                        <br />\r\n                        <div className=\"h-bid-p green\">{team.highestBidPrice.toFixed(2)}</div>\r\n                    </div>\r\n                    <div className=\"h-price\">\r\n                        ${team.lastSoldPrice.toFixed(2)}\r\n                    </div>\r\n                    <div className=\"h-ask gray\">\r\n                        Ask\r\n                        <br />\r\n                        <div className=\"h-ask-p red\">{team.lowestAskPrice.toFixed(2)}</div>\r\n                    </div>   \r\n                </div>\r\n                <div className='ss-cash'>Cash Available: ${user.cash && user.cash.toFixed(2)}</div>\r\n                {showShare && <div className=\"ss-shareAmt\"><span className=\"ss-share-label\">Shares:</span> <span className=\"ss-shareAmt-underline\">{calc ? calc : '0'}</span></div>}\r\n                {showPrice && <div className=\"ss-shareAmt\"><Link onClick={()=>{setShowPrice(false);setShowShare(true);setCalc('');setBidPrice();setBidShares()}}><i className=\"fa fa-undo\"></i></Link><span className=\"ss-share-label\">Price:</span> <span className=\"ss-shareAmt-underline\">{calc ? calc : '0.00'}</span></div>}\r\n                <div className=\"ss-btn-div\">\r\n                    {showShare && <><button className=\"ss-submit\" onClick={()=>{setShowPrice(true);setShowShare(false);setCalc('')}}>Next</button><br /></>}\r\n                    {showPrice && <><button className=\"ss-submit\" onClick={createBid}>Create Offer to Buy</button><br /></>}\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"1\")}}>1</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"2\")}}>2</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"3\")}}>3</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"4\")}}>4</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"5\")}}>5</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"6\")}}>6</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"7\")}}>7</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"8\")}}>8</button>\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"9\")}}>9</button>\r\n                    {showPrice && <button className=\"ss-btn\" onClick={()=>{addDigit(\".\")}}>.</button>}\r\n                    <button className=\"ss-btn\" onClick={()=>{addDigit(\"0\")}}>0</button>\r\n                    <button className=\"ss-btn-2\" onClick={()=>{deleteDigit()}}><i className=\"fa fa-arrow-left\"></i></button>\r\n                </div>\r\n            </div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateBid"]},"metadata":{},"sourceType":"module"}