{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Dallas/Desktop/simbull-two/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./tradeblock.css';import TBofferCard from'./TBofferCard';import moment from'moment';import{db,firebaseAnalytics}from'../../services/firebase';var TBoffers=function TBoffers(props){var user=props.user;var nba=['Celtics',,'Nets','Knicks','76ers','Raptors','Warriors','Clippers','Lakers','Suns','Kings','Bulls','Cavaliers','Pistons','Pacers','Bucks','Hawks','Hornets','Heat','Magic','Wizards','Nuggets','Timberwolves','Thunder','Blazers','Jazz','Mavericks','Rockets','Grizzlies','Pelicans','Spurs'];var nfl=['Patriots','Bills','Dolphins','Jets','Cowboys','Giants','Eagles','Football','Ravens','Bengals','Browns','Steelers','Bears','Lions','Packers','Vikings','Texans','Colts','Jaguars','Titans','Falcons','Panthers','Saints','Bucs','Broncos','Chiefs','Raiders','Chargers','Cardinals','Rams','49ers','Seahawks'];//states\nvar _useState=useState('all'),_useState2=_slicedToArray(_useState,2),sortType=_useState2[0],setSortType=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),bids=_useState4[0],setBids=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),asks=_useState6[0],setAsks=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),offers=_useState8[0],setOffers=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),bidsDay=_useState10[0],setBidsDay=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),asksDay=_useState12[0],setAsksDay=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),nbaAskD=_useState14[0],setNbaAskD=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),nbaAskW=_useState16[0],setNbaAskW=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),nbaBidD=_useState18[0],setNbaBidD=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),nbaBidW=_useState20[0],setNbaBidW=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),nflAskD=_useState22[0],setNflAskD=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),nflAskW=_useState24[0],setNflAskW=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),nflBidD=_useState26[0],setNflBidD=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),nflBidW=_useState28[0],setNflBidW=_useState28[1];//Functions\nvar date=moment().subtract(7,'d').format('YYYYMMDD');var todate=moment().format('YYYYMMDD');var getBids=function getBids(){var bidArr=[];var BD=0;var nbaBD=0;var nbaBW=0;var nflBD=0;var nflBW=0;db.collection('Bids').where('date','>=',date).onSnapshot(function(querySnap){querySnap.forEach(function(doc){var data=doc.data();bidArr.push(data);if(nba.includes(data.bidTeam)){nbaBW++;}else if(nfl.includes(data.bidTeam)){nflBW++;}if(data.date>=props.yesterday){BD++;if(nba.includes(data.bidTeam)){nbaBD++;}else if(nfl.includes(data.bidTeam)){nflBD++;}}});setBids(bidArr);setBidsDay(BD);setNbaBidD(nbaBD);setNbaBidW(nbaBW);setNflBidD(nflBD);setNflBidW(nflBW);});};var getAsks=function getAsks(){var askArr=[];var AD=0;var nbaAD=0;var nbaAW=0;var nflAD=0;var nflAW=0;db.collection('Asks').where('date','>=',date).onSnapshot(function(querySnap){querySnap.forEach(function(doc){var data=doc.data();askArr.push(data);if(nba.includes(data.team)){nbaAW++;}else if(nfl.includes(data.team)){nflAW++;}if(data.date>=props.yesterday){AD++;if(nba.includes(data.team)){nbaAD++;}else if(nfl.includes(data.team)){nflAD++;}}});setAsks(askArr);setAsksDay(AD);setNbaAskD(nbaAD);setNbaAskW(nbaAW);setNflAskD(nflAD);setNflAskW(nflAW);});};useEffect(function(){getBids();getAsks();},[]);var combineOffers=function combineOffers(){var offersArr=bids.concat(asks);offersArr.sort(function(a,b){return b.time-a.time;});setOffers(offersArr);};useEffect(function(){combineOffers();},[bids,asks]);useEffect(function(){firebaseAnalytics.logEvent(\"offerFeed_visit\",{user:user&&user.email});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"TBoffers\",children:[props.sort&&/*#__PURE__*/_jsxs(\"div\",{className:\"tb-filter-div\",children:[/*#__PURE__*/_jsx(\"button\",{className:sortType==='nfl'?\"tb-filter-div-btn tb-filter-btn-selected\":\"tb-filter-div-btn\",onClick:function onClick(){setSortType('nfl');},children:\"SimNFL only\"}),/*#__PURE__*/_jsx(\"button\",{className:sortType==='nba'?\"tb-filter-div-btn tb-filter-btn-selected\":\"tb-filter-div-btn\",onClick:function onClick(){setSortType('nba');},children:\"SimNBA only\"}),/*#__PURE__*/_jsx(\"button\",{className:sortType==='all'?\"tb-filter-div-btn-all tb-filter-btn-selected\":\"tb-filter-div-btn-all\",onClick:function onClick(){setSortType('all');},children:\"All\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tb-o-div-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-title\",children:\"Bids\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-day\",children:\"Past 24 Hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-day\",children:\"Past Week\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"tb-t-hr\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"tb-t-hr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-amt\",children:sortType==='all'?bidsDay:sortType==='nba'?nflBidD:nbaBidD}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-amt\",children:sortType==='all'?bids.length:sortType==='nba'?nbaBidW:nflBidW})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tb-o-div-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-title\",children:\"Asks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-day\",children:\"Past 24 Hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-day\",children:\"Past Week\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"tb-t-hr\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"tb-t-hr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-amt\",children:sortType==='all'?asksDay:sortType==='nfl'?nflAskD:nbaAskD}),/*#__PURE__*/_jsx(\"div\",{className:\"tb-t-amt\",children:sortType==='all'?asks.length:sortType==='nfl'?nflAskW:nbaAskW})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tb-cards\",children:[sortType==='all'&&offers.map(function(o){return/*#__PURE__*/_jsx(TBofferCard,{teams:props.teams,o:o});}),sortType==='nfl'&&offers.map(function(o){if(o.bidTeam){if(nfl.includes(o.bidTeam)){return/*#__PURE__*/_jsx(TBofferCard,{teams:props.teams,o:o});}}else{if(nfl.includes(o.team)){return/*#__PURE__*/_jsx(TBofferCard,{teams:props.teams,o:o});}}}),sortType==='nba'&&offers.map(function(o){if(o.bidTeam){if(nba.includes(o.bidTeam)){return/*#__PURE__*/_jsx(TBofferCard,{teams:props.teams,o:o});}}else{if(nba.includes(o.team)){return/*#__PURE__*/_jsx(TBofferCard,{teams:props.teams,o:o});}}})]})]});};export default TBoffers;","map":{"version":3,"sources":["C:/Users/Dallas/Desktop/simbull-two/src/components/TradeBlock/TBoffers.js"],"names":["React","useState","useEffect","TBofferCard","moment","db","firebaseAnalytics","TBoffers","props","user","nba","nfl","sortType","setSortType","bids","setBids","asks","setAsks","offers","setOffers","bidsDay","setBidsDay","asksDay","setAsksDay","nbaAskD","setNbaAskD","nbaAskW","setNbaAskW","nbaBidD","setNbaBidD","nbaBidW","setNbaBidW","nflAskD","setNflAskD","nflAskW","setNflAskW","nflBidD","setNflBidD","nflBidW","setNflBidW","date","subtract","format","todate","getBids","bidArr","BD","nbaBD","nbaBW","nflBD","nflBW","collection","where","onSnapshot","querySnap","forEach","doc","data","push","includes","bidTeam","yesterday","getAsks","askArr","AD","nbaAD","nbaAW","nflAD","nflAW","team","combineOffers","offersArr","concat","sort","a","b","time","logEvent","email","length","map","o","teams"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './tradeblock.css'\r\nimport TBofferCard from './TBofferCard'\r\nimport moment from 'moment'\r\nimport {db, firebaseAnalytics} from '../../services/firebase'\r\n\r\nconst TBoffers = (props) => {\r\n    const user = props.user\r\n\r\n    const nba = ['Celtics',, 'Nets', 'Knicks', '76ers', 'Raptors', 'Warriors', 'Clippers', 'Lakers', 'Suns', 'Kings', 'Bulls', 'Cavaliers', 'Pistons', 'Pacers', 'Bucks', 'Hawks', 'Hornets', 'Heat', 'Magic', 'Wizards', 'Nuggets', 'Timberwolves', 'Thunder', 'Blazers', 'Jazz', 'Mavericks', 'Rockets', 'Grizzlies', 'Pelicans', 'Spurs']\r\n    const nfl = ['Patriots', 'Bills', 'Dolphins', 'Jets', 'Cowboys', 'Giants', 'Eagles', 'Football', 'Ravens', 'Bengals', 'Browns', 'Steelers', 'Bears', 'Lions', 'Packers', 'Vikings', 'Texans', 'Colts', 'Jaguars', 'Titans', 'Falcons', 'Panthers', 'Saints', 'Bucs', 'Broncos', 'Chiefs', 'Raiders', 'Chargers', 'Cardinals', 'Rams', '49ers', 'Seahawks']\r\n\r\n    //states\r\n    const [sortType, setSortType] = useState('all')\r\n    const [bids, setBids] = useState([])\r\n    const [asks, setAsks] = useState([])\r\n    const [offers, setOffers] = useState([])\r\n    const [bidsDay, setBidsDay] = useState(0)\r\n    const [asksDay, setAsksDay] = useState(0)\r\n    const [nbaAskD, setNbaAskD] = useState(0)\r\n    const [nbaAskW, setNbaAskW] = useState(0)\r\n    const [nbaBidD, setNbaBidD] = useState(0)\r\n    const [nbaBidW, setNbaBidW] = useState(0)\r\n    const [nflAskD, setNflAskD] = useState(0)\r\n    const [nflAskW, setNflAskW] = useState(0)\r\n    const [nflBidD, setNflBidD] = useState(0)\r\n    const [nflBidW, setNflBidW] = useState(0)\r\n    \r\n\r\n    //Functions\r\n    let date = moment().subtract(7,'d').format('YYYYMMDD')\r\n    let todate = moment().format('YYYYMMDD')\r\n    const getBids = () => {\r\n        let bidArr = []\r\n        let BD = 0\r\n        let nbaBD = 0\r\n        let nbaBW = 0\r\n        let nflBD = 0\r\n        let nflBW = 0\r\n        db.collection('Bids').where('date', '>=', date).onSnapshot(querySnap => {\r\n            querySnap.forEach(doc => {\r\n                const data = doc.data()\r\n                bidArr.push(data)\r\n                if(nba.includes(data.bidTeam)){\r\n                    nbaBW++\r\n                }else if(nfl.includes(data.bidTeam)){\r\n                    nflBW++\r\n                }\r\n                if(data.date >= props.yesterday){\r\n                    BD++\r\n                    if(nba.includes(data.bidTeam)){\r\n                        nbaBD++\r\n                    }else if(nfl.includes(data.bidTeam)){\r\n                        nflBD++\r\n                    }\r\n                }\r\n            })\r\n            setBids(bidArr)\r\n            setBidsDay(BD)\r\n            setNbaBidD(nbaBD)\r\n            setNbaBidW(nbaBW)\r\n            setNflBidD(nflBD)\r\n            setNflBidW(nflBW)\r\n        })\r\n    }\r\n    const getAsks = () => { \r\n        let askArr = []\r\n        let AD = 0 \r\n        let nbaAD = 0\r\n        let nbaAW = 0\r\n        let nflAD = 0\r\n        let nflAW = 0\r\n        db.collection('Asks').where('date', '>=', date).onSnapshot(querySnap => {\r\n            querySnap.forEach(doc => {\r\n                const data = doc.data()\r\n                askArr.push(data)\r\n                if(nba.includes(data.team)){\r\n                    nbaAW++\r\n                }else if(nfl.includes(data.team)){\r\n                    nflAW++\r\n                }\r\n                if(data.date >= props.yesterday){\r\n                    AD++\r\n                    if(nba.includes(data.team)){\r\n                        nbaAD++\r\n                    }else if(nfl.includes(data.team)){\r\n                        nflAD++\r\n                    }\r\n                }\r\n            })\r\n            setAsks(askArr)\r\n            setAsksDay(AD)\r\n            setNbaAskD(nbaAD)\r\n            setNbaAskW(nbaAW)\r\n            setNflAskD(nflAD)\r\n            setNflAskW(nflAW)\r\n        })\r\n    }\r\n    useEffect(() => {\r\n        getBids()\r\n        getAsks()\r\n    }, [])\r\n    const combineOffers = () => {\r\n        let offersArr = bids.concat(asks)\r\n        offersArr.sort(function(a, b) {\r\n            return b.time - a.time;\r\n        });\r\n        setOffers(offersArr)\r\n    }\r\n    useEffect(() => {\r\n        combineOffers()\r\n    }, [bids, asks])\r\n\r\n\r\n    useEffect(()=>{\r\n        firebaseAnalytics.logEvent(\"offerFeed_visit\", {\r\n           user: user && user.email \r\n        })\r\n    },[])\r\n\r\n \r\n    return(\r\n        <div className=\"TBoffers\">\r\n            {props.sort && <div className=\"tb-filter-div\">\r\n                <button className={sortType === 'nfl' ? \"tb-filter-div-btn tb-filter-btn-selected\" : \"tb-filter-div-btn\"} onClick={()=>{setSortType('nfl')}}>SimNFL only</button>\r\n                <button className={sortType === 'nba' ? \"tb-filter-div-btn tb-filter-btn-selected\" : \"tb-filter-div-btn\"} onClick={()=>{setSortType('nba')}}>SimNBA only</button>\r\n                <button className={sortType === 'all' ? \"tb-filter-div-btn-all tb-filter-btn-selected\" : \"tb-filter-div-btn-all\"} onClick={()=>{setSortType('all')}}>All</button>\r\n            </div>}\r\n            <div className=\"tb-o-div-left\">\r\n                <div className=\"tb-t-title\">Bids</div>\r\n                <div className=\"tb-t-day\">Past 24 Hours</div>\r\n                <div className=\"tb-t-day\">Past Week</div>\r\n                <hr className=\"tb-t-hr\" />\r\n                <hr className=\"tb-t-hr\" />\r\n                <div className=\"tb-t-amt\">{sortType === 'all' ? bidsDay : sortType === 'nba' ? nflBidD : nbaBidD}</div>\r\n                <div className=\"tb-t-amt\">{sortType === 'all' ? bids.length : sortType === 'nba' ? nbaBidW : nflBidW}</div>\r\n            </div>\r\n            <div className=\"tb-o-div-right\">\r\n                <div className=\"tb-t-title\">Asks</div>\r\n                <div className=\"tb-t-day\">Past 24 Hours</div>\r\n                <div className=\"tb-t-day\">Past Week</div>\r\n                <hr className=\"tb-t-hr\" />\r\n                <hr className=\"tb-t-hr\" />\r\n                <div className=\"tb-t-amt\">{sortType === 'all' ? asksDay : sortType === 'nfl' ? nflAskD : nbaAskD}</div>\r\n                <div className=\"tb-t-amt\">{sortType === 'all' ? asks.length : sortType === 'nfl' ? nflAskW : nbaAskW}</div>\r\n            </div>\r\n            <div className='tb-cards'>\r\n                {sortType === 'all' && offers.map(o => {\r\n                    return <TBofferCard teams={props.teams} o={o} />\r\n                })}\r\n                {sortType === 'nfl' && offers.map(o => {\r\n                    if(o.bidTeam){\r\n                        if(nfl.includes(o.bidTeam)){\r\n                            return <TBofferCard teams={props.teams} o={o} />\r\n                        }\r\n                    }else{\r\n                        if(nfl.includes(o.team)){\r\n                            return <TBofferCard teams={props.teams} o={o} />\r\n                        }\r\n                    }\r\n                    \r\n                })}\r\n                {sortType === 'nba' && offers.map(o => {\r\n                     if(o.bidTeam){\r\n                        if(nba.includes(o.bidTeam)){\r\n                            return <TBofferCard teams={props.teams} o={o} />\r\n                        }\r\n                    }else{\r\n                        if(nba.includes(o.team)){\r\n                            return <TBofferCard teams={props.teams} o={o} />\r\n                        }\r\n                    }\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TBoffers"]},"metadata":{},"sourceType":"module"}