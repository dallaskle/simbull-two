{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Dallas\\\\Desktop\\\\simbull-two\\\\src\\\\components\\\\LogIn\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport './Login.css';\nimport Navbar from '../LandingPage/NavBar';\nimport Footer from '../LandingPage/Footer';\nimport { db, auth } from '../../services/firebase';\nimport firebase from 'firebase';\nimport moment from 'moment';\nimport { Link } from 'react-router-dom';\n\nconst Login = props => {\n  _s();\n\n  //states\n  const [login, setLogin] = useState(true);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [checkPassword, setCheckPassword] = useState('');\n  const emailField = useRef(null);\n  const passwordField = useRef(null);\n  let code = '';\n\n  if (props.location.state && props.location.state.code) {\n    code = props.location.state.code;\n  } //capture autofill \n\n\n  useEffect(() => {\n    let interval = setInterval(() => {\n      if (emailField.current) {\n        setEmail(emailField.current.value);\n        setPassword(passwordField.current.value); //do the same for all autofilled fields\n\n        clearInterval(interval);\n      }\n    }, 100);\n  }); //Login\n\n  const handleLogIn = () => {\n    auth.signInWithEmailAndPassword(email, password).catch(function (error) {\n      // Handle Errors here.\n      var errorMessage = error.message;\n      alert(errorMessage);\n    });\n    setEmail('');\n    setPassword('');\n  }; //Signup\n\n\n  const handleClick = () => {\n    if (password === checkPassword && document.getElementById('check').checked) {\n      if (email.length > 0 && password.length > 0) {\n        auth.signInWithEmailAndPassword(email, password).then(user => {\n          // Signed in \n          // ...\n          console.log('user signed in');\n        }).catch(error => {\n          var errorCode = error.code;\n          var errorMessage = error.message; // ..\n\n          db.collection('Users').doc(email.toLowerCase()).get().then(doc => {\n            if (doc.data()) {\n              alert(`Wrong Password`);\n            } else {\n              let date = moment().format('MMMM Do YYYY, h:mm:ss a');\n              let date2 = moment().format('YYYYMMDD-HH:mm:ss');\n              let day = moment();\n              let priceDate = `0${day.date()}`.slice(-2);\n              let month = `0${day.month() + 1}`.slice(-2);\n              let year = day.year();\n              let useDate = `${year}${month}${priceDate}`;\n              let dbFriendly = `prices.${useDate}`;\n              let yesterday = moment().subtract(1, 'days').format('YYYYMMDD');\n              let dayBefore = moment().subtract(2, 'days').format('YYYYMMDD');\n              db.collection('Emails').doc(`${date2}-${email}`).set({\n                email: email,\n                date: date2\n              }).then(res => {\n                db.collection('Users').doc(email.toLowerCase()).set({\n                  email: email.toLowerCase(),\n                  cash: 0,\n                  code: code,\n                  date: date,\n                  showPopup: true,\n                  totalValue: 0,\n                  shares: [],\n                  totalPayouts: 0,\n                  nbaPayouts: 0,\n                  nflPayouts: 0,\n                  completedProfile: false,\n                  currentMoneyDeposited: 0,\n                  bonusesReceived: 0,\n                  subscription: false,\n                  referred: 0,\n                  tenure: 2,\n                  prices: {\n                    [useDate]: 0,\n                    [yesterday]: 0,\n                    [dayBefore]: 0\n                  },\n                  firstName: '',\n                  lastName: '',\n                  phoneNumber: '',\n                  address: '',\n                  zipCode: '',\n                  city: '',\n                  state: '',\n                  referredName: '',\n                  favoriteTeam: '',\n                  birthday: ''\n                }).then(res2 => {\n                  auth.createUserWithEmailAndPassword(email, password).catch(function (error) {\n                    // Handle Errors here.\n                    var errorMessage = error.message;\n                    alert(errorMessage);\n                  });\n                });\n              });\n            }\n          });\n        });\n      } else {\n        alert('Please fill out all fields.');\n        setEmail('');\n        setPassword('');\n        setCheckPassword('');\n      }\n    } else {\n      alert('Passwords are not the same or the Terms Box is not checked');\n      setEmail('');\n      setPassword('');\n      setCheckPassword('');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Login\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-head\",\n        children: \"Welcome to SimBull - The Stock Market for Sports!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), login && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-div\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-div-head\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-div-input\",\n            placeholder: \"email\",\n            value: email,\n            type: \"email\",\n            onChange: e => {\n              setEmail(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-div-input\",\n            placeholder: \"password\",\n            value: password,\n            type: \"password\",\n            onChange: e => {\n              setPassword(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogIn,\n            className: \"login-div-btn\",\n            children: \"Go To the Market\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-switch\",\n          children: [\"If you dont have an account, \", /*#__PURE__*/_jsxDEV(Link, {\n            onClick: () => {\n              setLogin(false);\n            },\n            children: \"click here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 80\n          }, this), \" to sign up\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 27\n      }, this), !login && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-div\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-div-head\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-div-input\",\n            placeholder: \"email\",\n            value: email,\n            type: \"email\",\n            onChange: e => {\n              setEmail(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-div-input\",\n            placeholder: \"password\",\n            value: password,\n            type: \"password\",\n            onChange: e => {\n              setPassword(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-div-input\",\n            placeholder: \"confirm password\",\n            value: checkPassword,\n            type: \"password\",\n            onChange: e => {\n              setCheckPassword(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: \"check\",\n            className: \"login-div-check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 31\n          }, this), \" I agree to SimBull's \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/TermsOfUse\",\n            children: \"Terms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 117\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleClick,\n            className: \"login-div-btn\",\n            children: \"Go To the Market\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-switch\",\n          children: [\"If you have an account, \", /*#__PURE__*/_jsxDEV(Link, {\n            onClick: () => {\n              setLogin(true);\n            },\n            children: \"click here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 75\n          }, this), \" to login\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 28\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"iqRySVZQlZdOXeUxZIpFHtUtRuA=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Dallas/Desktop/simbull-two/src/components/LogIn/Login.js"],"names":["React","useState","useRef","useEffect","Navbar","Footer","db","auth","firebase","moment","Link","Login","props","login","setLogin","email","setEmail","password","setPassword","checkPassword","setCheckPassword","emailField","passwordField","code","location","state","interval","setInterval","current","value","clearInterval","handleLogIn","signInWithEmailAndPassword","catch","error","errorMessage","message","alert","handleClick","document","getElementById","checked","length","then","user","console","log","errorCode","collection","doc","toLowerCase","get","data","date","format","date2","day","priceDate","slice","month","year","useDate","dbFriendly","yesterday","subtract","dayBefore","set","res","cash","showPopup","totalValue","shares","totalPayouts","nbaPayouts","nflPayouts","completedProfile","currentMoneyDeposited","bonusesReceived","subscription","referred","tenure","prices","firstName","lastName","phoneNumber","address","zipCode","city","referredName","favoriteTeam","birthday","res2","createUserWithEmailAndPassword","e","target"],"mappings":"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","sourcesContent":["import React, {useState, useRef, useEffect} from 'react'\r\nimport './Login.css'\r\nimport Navbar from '../LandingPage/NavBar'\r\nimport Footer from '../LandingPage/Footer'\r\nimport {db, auth} from '../../services/firebase'\r\nimport firebase from 'firebase'\r\nimport moment from 'moment'\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst Login = (props) => {\r\n    //states\r\n    const [login, setLogin] = useState(true)\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [checkPassword, setCheckPassword] = useState('')\r\n    const emailField = useRef(null)\r\n    const passwordField = useRef(null)\r\n\r\n    let code = ''\r\n    if(props.location.state && props.location.state.code){code = props.location.state.code}\r\n\r\n    //capture autofill \r\n    useEffect(() => {\r\n        let interval = setInterval(() => {\r\n          if (emailField.current) {\r\n            setEmail(emailField.current.value)\r\n            setPassword(passwordField.current.value)\r\n            //do the same for all autofilled fields\r\n            clearInterval(interval)\r\n          }\r\n        }, 100)\r\n    })\r\n\r\n    //Login\r\n    const handleLogIn = () => {\r\n        auth.signInWithEmailAndPassword(email, password).catch(function(error) {\r\n            // Handle Errors here.\r\n            var errorMessage = error.message;\r\n            alert(errorMessage)\r\n        });\r\n        setEmail('');\r\n        setPassword('');\r\n    }\r\n\r\n    //Signup\r\n    const handleClick = () => {\r\n        if(password === checkPassword && document.getElementById('check').checked){\r\n            if(email.length > 0 && password.length > 0){\r\n                auth.signInWithEmailAndPassword(email, password)\r\n                    .then((user) => {\r\n                        // Signed in \r\n                        // ...\r\n                        console.log('user signed in')\r\n                    })\r\n                    .catch((error) => {\r\n                        var errorCode = error.code;\r\n                        var errorMessage = error.message;\r\n                        // ..\r\n                        db.collection('Users').doc(email.toLowerCase()).get().then(doc => {\r\n                            if(doc.data()){\r\n                                alert(`Wrong Password`)\r\n                            }\r\n                            else{\r\n                                let date = moment().format('MMMM Do YYYY, h:mm:ss a')\r\n                                let date2 = moment().format('YYYYMMDD-HH:mm:ss')\r\n                                let day = moment()\r\n                                let priceDate = (`0${day.date()}`).slice(-2)\r\n                                let month = (`0${day.month()+1}`).slice(-2)\r\n                                let year = day.year()\r\n                                let useDate = `${year}${month}${priceDate}`\r\n                                let dbFriendly = `prices.${useDate}`\r\n                                let yesterday = moment().subtract(1, 'days').format('YYYYMMDD');\r\n                                let dayBefore = moment().subtract(2, 'days').format('YYYYMMDD');\r\n                                db.collection('Emails').doc(`${date2}-${email}`).set({\r\n                                    email: email,\r\n                                    date: date2\r\n                                }).then(res => {\r\n                                    db.collection('Users').doc(email.toLowerCase()).set({\r\n                                        email: email.toLowerCase(),\r\n                                        cash: 0,\r\n                                        code: code,\r\n                                        date: date,\r\n                                        showPopup: true,\r\n                                        totalValue: 0,\r\n                                        shares: [],\r\n                                        totalPayouts: 0,\r\n                                        nbaPayouts: 0,\r\n                                        nflPayouts: 0,\r\n                                        completedProfile: false,\r\n                                        currentMoneyDeposited: 0,\r\n                                        bonusesReceived: 0,\r\n                                        subscription: false,\r\n                                        referred: 0,\r\n                                        tenure: 2, \r\n                                        prices: {\r\n                                            [useDate] : 0,\r\n                                            [yesterday] : 0,\r\n                                            [dayBefore] : 0\r\n                                        },\r\n                                        firstName: '',\r\n                                        lastName: '',\r\n                                        phoneNumber: '',\r\n                                        address: '',\r\n                                        zipCode: '',\r\n                                        city: '',\r\n                                        state: '',\r\n                                        referredName: '',\r\n                                        favoriteTeam: '',\r\n                                        birthday: '',\r\n                                    }).then(res2 => {\r\n                                        auth.createUserWithEmailAndPassword(email, password).catch(function(error) {\r\n                                            // Handle Errors here.\r\n                                            var errorMessage = error.message;\r\n                                            alert(errorMessage)\r\n                                        });\r\n                                    })\r\n                                })\r\n                            }\r\n                        })\r\n                    })\r\n            }\r\n            else{\r\n                alert('Please fill out all fields.')\r\n                setEmail('')\r\n                setPassword('')\r\n                setCheckPassword('')\r\n            }\r\n        }else{\r\n            alert('Passwords are not the same or the Terms Box is not checked')\r\n            setEmail('')\r\n            setPassword('')\r\n            setCheckPassword('')\r\n        }\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Navbar />\r\n            <div className=\"Login\">\r\n                <div className=\"login-head\">Welcome to SimBull - The Stock Market for Sports!</div>\r\n                {login && <div className=\"login-div\">\r\n                    <div className=\"login-div-head\">Log In</div>\r\n                    <div>\r\n                        <input className='login-div-input' placeholder='email' value={email} type='email' onChange={(e)=>{setEmail(e.target.value)}} />\r\n                        <input  className='login-div-input' placeholder='password' value={password} type=\"password\" onChange={(e)=>{setPassword(e.target.value)}} />\r\n                        <button onClick={handleLogIn} className='login-div-btn'>Go To the Market</button>\r\n                    </div>\r\n                    <div className='login-switch'>If you dont have an account, <Link onClick={()=>{setLogin(false)}}>click here</Link> to sign up</div>\r\n                </div>}\r\n                {!login && <div className=\"login-div\">\r\n                    <div className=\"login-div-head\">Sign Up</div>\r\n                    <div>\r\n                        <input className='login-div-input' placeholder='email' value={email} type='email' onChange={(e)=>{setEmail(e.target.value)}} />\r\n                        <input  className='login-div-input' placeholder='password' value={password} type=\"password\" onChange={(e)=>{setPassword(e.target.value)}} />\r\n                        <input  className='login-div-input' placeholder='confirm password' value={checkPassword} type=\"password\" onChange={(e)=>{setCheckPassword(e.target.value)}} />\r\n                        <br /><input type='checkbox' id=\"check\" className='login-div-check' /> I agree to SimBull's <Link to=\"/TermsOfUse\">Terms</Link>\r\n                        <button onClick={handleClick} className='login-div-btn'>Go To the Market</button>\r\n                    </div>\r\n                    <div className='login-switch'>If you have an account, <Link onClick={()=>{setLogin(true)}}>click here</Link> to login</div>\r\n                </div>}\r\n            </div>\r\n            <hr />\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}