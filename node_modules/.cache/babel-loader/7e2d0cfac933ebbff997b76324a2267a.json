{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Dallas\\\\Desktop\\\\simbull-two\\\\src\\\\components\\\\Portfolio\\\\CollectPayout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './portfolio.css';\nimport { db } from '../../services/firebase';\nimport firebase from 'firebase';\n\nconst CollectPayouts = props => {\n  _s();\n\n  //props\n  const user = props.user; //states\n\n  const [payouts, setPayouts] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [nbaAmt, setNbaAmt] = useState(0);\n  const [nflAmt, setNflAmt] = useState(0); //Functionality\n\n  const getUncollectedPayouts = () => {\n    if (user.email) {\n      const payouts1 = [];\n      let holder = 0;\n      let nba = 0;\n      let nfl = 0;\n      db.collection('Payouts').where('payoutUser', '==', user.email).where('collected', '==', false).get().then(snapshot => {\n        snapshot.forEach(doc => {\n          const data = doc.data();\n          payouts1.push(data);\n          holder = holder + data.payoutAmount;\n          data.payoutAmount === 0.1 ? nba = nba + 0.1 : nfl = nfl + 0.5;\n        });\n        console.log('payouts');\n        console.log(payouts1);\n        setPayouts(payouts1);\n        setTotal(holder);\n        setNbaAmt(nba);\n        setNflAmt(nfl);\n      });\n    }\n  };\n\n  useEffect(() => {\n    getUncollectedPayouts();\n  }, [user]);\n\n  const collectPayouts = () => {\n    let watch = document.getElementById('watch').checked;\n    let follow = document.getElementById('follow').checked;\n    let checked = document.getElementById('checked').checked;\n    let nope = document.getElementById('nope').checked;\n    let date = Date.now();\n    let batch = db.batch();\n    let userRef = db.collection('Users').doc(user.email);\n    batch.update(userRef, {\n      cash: firebase.firestore.FieldValue.increment(total),\n      totalPayouts: firebase.firestore.FieldValue.increment(payouts.length),\n      nflPayouts: firebase.firestore.FieldValue.increment(nflAmt / 0.5),\n      nbaPayouts: firebase.firestore.FieldValue.increment(nbaAmt / 0.1)\n    });\n    let feedbackRef = db.collection('feedback').doc(`${date}-${user.email}`);\n    batch.set(feedbackRef, {\n      email: user.email,\n      date: date,\n      watch: watch,\n      follow: follow,\n      checked: checked,\n      nope: nope\n    });\n    payouts.map(p => {\n      if (p.payoutAmount === 0.1) {\n        let payoutRef = db.collection('Payouts').doc(`${p.date}-${p.share}-${p.payoutUser}`);\n        batch.update(payoutRef, {\n          collected: true\n        });\n      } else if (p.payoutAmount === 0.5) {\n        let payoutRef = db.collection('Payouts').doc(`${p.share}-${p.payoutUser}-${p.payoutAmount}-${p.date}`);\n        batch.update(payoutRef, {\n          collected: true\n        });\n      }\n    });\n    batch.commit().then(res => {\n      alert(`Win Payouts Collected: ${payouts.length}`);\n      return props.hide();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"CollectPayouts\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cp-close\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-times-circle\",\n        onClick: props.hide\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cp-title\",\n      children: \"Collect Win Payouts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cp-title-num\",\n      children: [\"( \", payouts.length, \" )\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cp-card-holder\",\n      children: [payouts.length > 0 && payouts.map(p => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cp-card-div\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cp-card-left\",\n            children: [\"sim\", p.share.substring(0, p.share.length - 4), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cp-card-date\",\n              children: `${p.date.substring(4, 6)}/${p.date.substring(6, 8)}/${p.date.substring(2, 4)}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 105\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cp-card-right green\",\n            children: [\"$\", p.payoutAmount.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"cp-card-total-hr\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cp-card-total\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cp-card-total-left\",\n          children: \"Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cp-card-total-right\",\n          children: [\"$\", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"align-bottom\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cp-question-div\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cp-question\",\n          children: \"Did you watch/follow any of these games?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cp-answers\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cp-answers-input\",\n            type: \"checkbox\",\n            id: \"watch\",\n            name: \"watch\",\n            value: \"watch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"cp-answers-txt\",\n            for: \"watch\",\n            children: \" I watched a game\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 96\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cp-answers-input\",\n            type: \"checkbox\",\n            id: \"follow\",\n            name: \"follow\",\n            value: \"follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"cp-answers-txt\",\n            for: \"follow\",\n            children: \" I followed a game online\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 105\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cp-answers-input\",\n            type: \"checkbox\",\n            id: \"checked\",\n            name: \"checked\",\n            value: \"checked\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"cp-answers-txt\",\n            for: \"checked\",\n            children: \" I checked the score\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 101\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"cp-answers-input\",\n            type: \"checkbox\",\n            id: \"nope\",\n            name: \"nope\",\n            value: \"nope\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"cp-answers-txt\",\n            for: \"nope\",\n            children: \"Nope\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 82\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cp-card-btn-div\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: collectPayouts,\n          className: \"cp-card-btn\",\n          children: \"Collect Win Payouts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CollectPayouts, \"Mcfq6i3uFcThDM/7rdvf6kWR4CY=\");\n\n_c = CollectPayouts;\nexport default CollectPayouts;\n\nvar _c;\n\n$RefreshReg$(_c, \"CollectPayouts\");","map":{"version":3,"sources":["C:/Users/Dallas/Desktop/simbull-two/src/components/Portfolio/CollectPayout.js"],"names":["React","useState","useEffect","db","firebase","CollectPayouts","props","user","payouts","setPayouts","total","setTotal","nbaAmt","setNbaAmt","nflAmt","setNflAmt","getUncollectedPayouts","email","payouts1","holder","nba","nfl","collection","where","get","then","snapshot","forEach","doc","data","push","payoutAmount","console","log","collectPayouts","watch","document","getElementById","checked","follow","nope","date","Date","now","batch","userRef","update","cash","firestore","FieldValue","increment","totalPayouts","length","nflPayouts","nbaPayouts","feedbackRef","set","map","p","payoutRef","share","payoutUser","collected","commit","res","alert","hide","substring","toFixed"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './portfolio.css'\r\nimport {db} from '../../services/firebase'\r\nimport firebase from 'firebase'\r\n\r\nconst CollectPayouts = (props) => {\r\n    //props\r\n    const user = props.user\r\n\r\n    //states\r\n    const [payouts, setPayouts] = useState([])\r\n    const [total, setTotal] = useState(0)\r\n    const [nbaAmt, setNbaAmt] = useState(0)\r\n    const [nflAmt, setNflAmt] = useState(0)\r\n\r\n    //Functionality\r\n    const getUncollectedPayouts = () => {\r\n        if(user.email){\r\n            const payouts1 = []\r\n            let holder = 0\r\n            let nba = 0\r\n            let nfl = 0\r\n            db.collection('Payouts').where('payoutUser', '==', user.email).where('collected', '==', false).get().then(snapshot => {\r\n                snapshot.forEach(doc => {\r\n                    const data = doc.data()\r\n                    payouts1.push(data)\r\n                    holder = holder + data.payoutAmount\r\n                    data.payoutAmount === 0.1 ? nba = nba + 0.1 : nfl = nfl + 0.5\r\n                })\r\n                console.log('payouts')\r\n                console.log(payouts1)\r\n                setPayouts(payouts1)\r\n                setTotal(holder)\r\n                setNbaAmt(nba)\r\n                setNflAmt(nfl)\r\n            })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getUncollectedPayouts()\r\n    }, [user])\r\n\r\n    const collectPayouts = () => {\r\n        let watch = document.getElementById('watch').checked\r\n        let follow = document.getElementById('follow').checked\r\n        let checked = document.getElementById('checked').checked\r\n        let nope = document.getElementById('nope').checked\r\n        let date = Date.now()\r\n        let batch = db.batch()\r\n        let userRef =  db.collection('Users').doc(user.email)\r\n        batch.update(userRef, {\r\n                cash: firebase.firestore.FieldValue.increment(total),\r\n                totalPayouts: firebase.firestore.FieldValue.increment(payouts.length),\r\n                nflPayouts: firebase.firestore.FieldValue.increment(nflAmt / 0.5),\r\n                nbaPayouts: firebase.firestore.FieldValue.increment(nbaAmt / 0.1)\r\n        })\r\n        let feedbackRef = db.collection('feedback').doc(`${date}-${user.email}`)\r\n        batch.set(feedbackRef, {\r\n            email: user.email,\r\n            date: date,\r\n            watch: watch,\r\n            follow: follow,\r\n            checked: checked,\r\n            nope: nope\r\n        })\r\n        payouts.map(p => {\r\n            if(p.payoutAmount === 0.1){\r\n                let payoutRef = db.collection('Payouts').doc(`${p.date}-${p.share}-${p.payoutUser}`)\r\n                batch.update(payoutRef, {\r\n                    collected: true\r\n                })\r\n            }else if(p.payoutAmount === 0.5){\r\n                let payoutRef = db.collection('Payouts').doc(`${p.share}-${p.payoutUser}-${p.payoutAmount}-${p.date}`)\r\n                batch.update(payoutRef, {\r\n                    collected: true\r\n                })\r\n            }\r\n        })\r\n        batch.commit().then(res => {alert(`Win Payouts Collected: ${payouts.length}`); return props.hide()})\r\n        \r\n    }\r\n\r\n    return(\r\n        <div className=\"CollectPayouts\">\r\n            <div className=\"cp-close\"><i className=\"fa fa-times-circle\" onClick={props.hide}></i></div>\r\n            <div className=\"cp-title\">Collect Win Payouts</div>\r\n            <div className=\"cp-title-num\">( {payouts.length} )</div>\r\n            <div className=\"cp-card-holder\">\r\n                \r\n                {payouts.length > 0 && payouts.map(p => {\r\n                    return(\r\n                        <div className=\"cp-card-div\">\r\n                            <div className=\"cp-card-left\">sim{p.share.substring(0, p.share.length - 4)} <span className=\"cp-card-date\">{`${p.date.substring(4, 6)}/${p.date.substring(6, 8)}/${p.date.substring(2, 4)}`}</span></div>\r\n                            <div className=\"cp-card-right green\">${p.payoutAmount.toFixed(2)}</div>\r\n                        </div>\r\n                    )\r\n                })}\r\n\r\n                <hr className=\"cp-card-total-hr\" />\r\n                <div className=\"cp-card-total\">\r\n                    <div className='cp-card-total-left'>Total</div>\r\n                    <div className='cp-card-total-right'>${total.toFixed(2)}</div>\r\n                    \r\n                </div>\r\n\r\n            </div>\r\n            <div className=\"align-bottom\">\r\n                <div className=\"cp-question-div\">\r\n                    <div className=\"cp-question\">\r\n                        Did you watch/follow any of these games?\r\n                    </div>\r\n                    <div className=\"cp-answers\">\r\n                        <input className=\"cp-answers-input\" type=\"checkbox\" id=\"watch\" name=\"watch\" value=\"watch\" />\r\n                        <label className=\"cp-answers-txt\" for=\"watch\"> I watched a game</label><br />\r\n                        <input className=\"cp-answers-input\" type=\"checkbox\" id=\"follow\" name=\"follow\" value=\"follow\" />\r\n                        <label className=\"cp-answers-txt\" for=\"follow\"> I followed a game online</label><br />\r\n                        <input className=\"cp-answers-input\" type=\"checkbox\" id=\"checked\" name=\"checked\" value=\"checked\" />\r\n                        <label className=\"cp-answers-txt\" for=\"checked\"> I checked the score</label><br />\r\n                        <input className=\"cp-answers-input\" type=\"checkbox\" id=\"nope\" name=\"nope\" value=\"nope\" />\r\n                        <label className=\"cp-answers-txt\" for=\"nope\">Nope</label><br />\r\n                    </div>\r\n                </div>\r\n                <div className=\"cp-card-btn-div\"><button onClick={collectPayouts} className=\"cp-card-btn\">Collect Win Payouts</button></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CollectPayouts"]},"metadata":{},"sourceType":"module"}