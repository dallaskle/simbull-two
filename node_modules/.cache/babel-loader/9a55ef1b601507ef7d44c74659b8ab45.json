{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Dallas/Desktop/simbull-two/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Account.css';import Header from'./Header';import{db}from'../../services/firebase';var Referrals=function Referrals(props){//props\nvar user=props.user;//states\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),newLink=_useState2[0],setNewLink=_useState2[1];var _useState3=useState(user.link?user.link:false),_useState4=_slicedToArray(_useState3,2),userLink=_useState4[0],setUserLink=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),refs=_useState8[0],setRefs=_useState8[1];//Functionality\nvar createRefLink=function createRefLink(){if(!refs.includes(newLink)){var batch=db.batch();var extraRef=db.collection('Affiliates').doc(\"\".concat(newLink));batch.set(extraRef,{link:newLink,email:user.email,bonusText:'$10 Deposit Bonus on Deposits over $100',bonus:10,needed:100,type:'basic'});var userRef=db.collection('Users').doc(user.email);batch.update(userRef,{link:newLink});batch.commit().then(function(res){alert(\"You have created a unique referral link for yourself! Go share it everywhere!\");}).catch(function(err){alert('There was an error. Please try again.');});}else{alert('This link is already taken. Please try a different one');}};useEffect(function(){var links1=[];db.collection('Affiliates').get().then(function(snapshot){snapshot.forEach(function(doc){var data=doc.data();links1.push(data.link);});setRefs(links1);});});useEffect(function(){if(user.link){setShow(true);}});var copyLink=function copyLink(){var textField=document.createElement('textarea');textField.innerText=\"https://simbull.app/\".concat(userLink);document.body.appendChild(textField);textField.select();document.execCommand('copy');textField.remove();alert('Copied!');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{header:\"\",link:props.history.goBack}),/*#__PURE__*/_jsx(\"div\",{className:\"Referrals DesktopContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"referrals-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"referrals-head\",children:\"Referrals\"}),/*#__PURE__*/_jsx(\"div\",{className:\"referrals-body\",children:\"Create your own referral link to share with your friends, family, and following. Receive $10 when one of your referrals makes their first deposit.\"}),userLink&&/*#__PURE__*/_jsxs(\"div\",{children:[\"You already have a referral link: \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"https://simbull.app/\".concat(userLink),children:/*#__PURE__*/_jsxs(\"span\",{id:\"link-id\",children:[\"simbull.app/\",userLink]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:copyLink,className:\"ref-copy-btn\",children:\"Copy My Link\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Share this with friends to get $10.\"]}),!userLink&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Create your link today. Fill in what you'd like your link to be below.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Simbull.app \",/*#__PURE__*/_jsx(\"span\",{className:\"bar\",children:\"/\"}),\" \",/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){setNewLink(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"ref-create-btn\",onClick:createRefLink,children:\"Create Referral Link\"})]})]})})]});};export default Referrals;","map":{"version":3,"sources":["C:/Users/Dallas/Desktop/simbull-two/src/components/Account/Referrals.js"],"names":["React","useState","useEffect","Header","db","Referrals","props","user","newLink","setNewLink","link","userLink","setUserLink","show","setShow","refs","setRefs","createRefLink","includes","batch","extraRef","collection","doc","set","email","bonusText","bonus","needed","type","userRef","update","commit","then","res","alert","catch","err","links1","get","snapshot","forEach","data","push","copyLink","textField","document","createElement","innerText","body","appendChild","select","execCommand","remove","history","goBack","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './Account.css'\r\nimport Header from './Header'\r\nimport {db} from '../../services/firebase'\r\n\r\nconst Referrals = (props) => {\r\n    //props\r\n    const user = props.user\r\n\r\n    //states\r\n    const [newLink, setNewLink] = useState('')\r\n    const [userLink, setUserLink] = useState(user.link ? user.link : false)\r\n    const [show, setShow] = useState(false)\r\n    const [refs, setRefs] = useState([])\r\n\r\n    //Functionality\r\n    const createRefLink = () => {\r\n        if(!refs.includes(newLink)){\r\n          let batch = db.batch()\r\n          let extraRef = db.collection('Affiliates').doc(`${newLink}`)\r\n          batch.set(extraRef, {\r\n            link: newLink,\r\n            email: user.email,\r\n            bonusText: '$10 Deposit Bonus on Deposits over $100',\r\n            bonus: 10,\r\n            needed: 100,\r\n            type: 'basic'\r\n          })\r\n          let userRef = db.collection('Users').doc(user.email) \r\n          batch.update(userRef, {\r\n            link: newLink\r\n          })\r\n          batch.commit().then(res => {\r\n            alert(`You have created a unique referral link for yourself! Go share it everywhere!`);\r\n          }).catch(err => {alert('There was an error. Please try again.')})\r\n          \r\n        }\r\n        else{\r\n          alert('This link is already taken. Please try a different one')\r\n        }\r\n    };\r\n\r\n    useEffect(()=> {\r\n        const links1 = []\r\n        db.collection('Affiliates').get().then(snapshot => {\r\n            snapshot.forEach(doc => {\r\n                const data = doc.data()\r\n                links1.push(data.link)\r\n            })\r\n            setRefs(links1)\r\n        })\r\n    })\r\n\r\n    useEffect(() => {\r\n        if(user.link){\r\n            setShow(true)\r\n        }\r\n    })\r\n\r\n    const copyLink = () => {\r\n        var textField = document.createElement('textarea')\r\n        textField.innerText = `https://simbull.app/${userLink}`\r\n        document.body.appendChild(textField)\r\n        textField.select()\r\n        document.execCommand('copy')\r\n        textField.remove()\r\n        alert('Copied!')\r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n        <Header header='' link={props.history.goBack} />\r\n        <div className=\"Referrals DesktopContainer\">\r\n            <div className='referrals-div'>\r\n                <div className='referrals-head'>Referrals</div>\r\n                <div className='referrals-body'>\r\n                    Create your own referral link to share with your friends, family, and following. Receive $10 when one of your referrals makes their first deposit.\r\n                </div>\r\n                {userLink && (\r\n                    <div>\r\n                    You already have a referral link: <br />\r\n                    <br />\r\n                    <a href={`https://simbull.app/${userLink}`}><span id='link-id'>simbull.app/{userLink}</span></a>\r\n                    <br />\r\n                    <br />\r\n                    <button onClick={copyLink} className=\"ref-copy-btn\">Copy My Link</button>\r\n                    <br />\r\n                    <br />\r\n                    Share this with friends to get $10.\r\n                    </div>\r\n                )}\r\n                {!userLink && (\r\n                    <div>\r\n                        Create your link today. Fill in what you'd like your link to be below.\r\n                        <br />\r\n                        <br />\r\n                        Simbull.app <span className=\"bar\">/</span>{\" \"}\r\n                        <input\r\n                            onChange={(e) => {\r\n                            setNewLink(e.target.value);\r\n                            }}\r\n                        />\r\n                        <br />\r\n                        <br />\r\n                        <button className=\"ref-create-btn\" onClick={createRefLink}>\r\n                            Create Referral Link\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Referrals"]},"metadata":{},"sourceType":"module"}