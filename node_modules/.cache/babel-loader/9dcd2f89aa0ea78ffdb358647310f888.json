{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Dallas/Desktop/simbull-two/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./histories.css';import{db}from'../../../services/firebase';var TradeHistory=function TradeHistory(props){//props\nvar user=props.user;//states\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),buys=_useState2[0],setBuys=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sells=_useState4[0],setSells=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),trades=_useState6[0],setTrades=_useState6[1];//Functions\nvar getTrades=function getTrades(){if(trades.length===0){var buysArr=[];var sellsArr=[];db.collection('Transactions').where('buyer','==',user.email).get().then(function(snapshot){snapshot.forEach(function(doc){var data=doc.data();buysArr.push(data);});setBuys(buysArr);});db.collection('Transactions').where('seller','==',user.email).get().then(function(snapshot){snapshot.forEach(function(doc){var data=doc.data();sellsArr.push(data);});setSells(sellsArr);});}};useEffect(function(){getTrades();},[]);var combineTrades=function combineTrades(){var tradesArr=buys.concat(sells);tradesArr.sort(function(a,b){return b.date-a.date;});setTrades(tradesArr);};useEffect(function(){combineTrades();},[buys,sells]);return/*#__PURE__*/_jsxs(\"div\",{className:\"TradeHistory\",children:[trades.length>0&&trades.map(function(t){return/*#__PURE__*/_jsxs(\"div\",{className:\"h-trade-div\",children:[/*#__PURE__*/_jsx(\"hr\",{className:\"h-trade-hr\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-trade-div-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-trade-div-type\",children:t.buyer===user.email?\"Buy: sim\".concat(t.share.substring(0,t.share.length-4)):\"Sell: Sim\".concat(t.share.substring(0,t.share.length-4))}),/*#__PURE__*/_jsx(\"div\",{className:\"h-trade-div-date\",children:\"\".concat(t.date.substring(4,6),\"/\").concat(t.date.substring(6,8),\"/\").concat(t.date.substring(0,4))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-trade-div-right blk-txt\",children:[t.buyer===user.email?'-':'+',\"$\".concat(t.price.toFixed(2))]})]});}),/*#__PURE__*/_jsx(\"hr\",{className:\"h-trade-hr\"})]});};export default TradeHistory;","map":{"version":3,"sources":["C:/Users/Dallas/Desktop/simbull-two/src/components/Portfolio/Histories/TradeHistory.js"],"names":["React","useState","useEffect","db","TradeHistory","props","user","buys","setBuys","sells","setSells","trades","setTrades","getTrades","length","buysArr","sellsArr","collection","where","email","get","then","snapshot","forEach","doc","data","push","combineTrades","tradesArr","concat","sort","a","b","date","map","t","buyer","share","substring","price","toFixed"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './histories.css'\r\nimport {db} from '../../../services/firebase'\r\n\r\nconst TradeHistory = (props) => {\r\n    //props\r\n    const user = props.user\r\n\r\n    //states\r\n    const [buys, setBuys] = useState([])\r\n    const [sells, setSells] = useState([])\r\n    const [trades, setTrades] = useState([])\r\n\r\n    //Functions\r\n    const getTrades = () => {\r\n        if(trades.length === 0){\r\n            let buysArr = []\r\n            let sellsArr = []\r\n            db.collection('Transactions').where('buyer', '==', user.email).get().then(snapshot => {\r\n                snapshot.forEach(doc => {\r\n                    const data = doc.data()\r\n                    buysArr.push(data)\r\n                })\r\n                setBuys(buysArr)\r\n            })\r\n            db.collection('Transactions').where('seller', '==', user.email).get().then(snapshot => {\r\n                snapshot.forEach(doc => {\r\n                    const data = doc.data()\r\n                    sellsArr.push(data)\r\n                })\r\n                setSells(sellsArr)\r\n            })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getTrades()\r\n    }, [])\r\n\r\n    const combineTrades = () => {\r\n        let tradesArr = buys.concat(sells)\r\n        tradesArr.sort(function(a, b) {\r\n            return b.date - a.date;\r\n        });\r\n        setTrades(tradesArr)\r\n    }\r\n    useEffect(() => {\r\n        combineTrades()\r\n    }, [buys, sells])\r\n\r\n    return(\r\n        <div className=\"TradeHistory\">\r\n            {trades.length > 0 && trades.map(t=> {\r\n                return(\r\n                    <div className=\"h-trade-div\">\r\n                        <hr className=\"h-trade-hr\" />\r\n                        <div className=\"h-trade-div-left\">\r\n                            <div className=\"h-trade-div-type\">\r\n                                {t.buyer === user.email ? `Buy: sim${t.share.substring(0, t.share.length - 4)}` : `Sell: Sim${t.share.substring(0, t.share.length - 4)}`}\r\n                            </div>\r\n                            <div className=\"h-trade-div-date\">   \r\n                                {`${t.date.substring(4, 6)}/${t.date.substring(6, 8)}/${t.date.substring(0, 4)}`}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"h-trade-div-right blk-txt\"> \r\n                            {t.buyer === user.email ? '-' : '+'}{`$${t.price.toFixed(2)}`}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n            \r\n            <hr className=\"h-trade-hr\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TradeHistory"]},"metadata":{},"sourceType":"module"}